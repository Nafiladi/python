<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catch the Falling Objects</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #f0f8ff;
            overflow: hidden;
        }

        #basket {
            position: absolute;
            bottom: 10px;
            left: 50%;
            width: 150px;
            height: 75px;
            background-color: #ff6347;
            border-radius: 10px;
            transform: translateX(-50%);
        }

        .fallingObject {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: #4682b4;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .fallingObject span {
            color: white;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
        }

        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            color: #333;
        }

        #lives {
            position: absolute;
            top: 10px;
            left: 150px;
            font-size: 24px;
            color: #333;
        }

        #gameOverUI {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
        }

        #gameOverUI button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="score">Score: 0</div>
        <div id="lives">Lives: 3</div>
        <div id="basket"></div>
    </div>
    <div id="gameOverUI">
        <h1>Game Over</h1>
        <p id="finalScore"></p>
        <button id="playAgainButton">Play Again</button>
        <button id="leaderboardButton">View Leaderboard</button>
    </div>
    <script>
        const gameContainer = document.getElementById("gameContainer");
        const basket = document.getElementById("basket");
        const scoreDisplay = document.getElementById("score");
        const livesDisplay = document.getElementById("lives");
        const gameOverUI = document.getElementById("gameOverUI");
        const finalScore = document.getElementById("finalScore");
        const playAgainButton = document.getElementById("playAgainButton");
        const leaderboardButton = document.getElementById("leaderboardButton");

        let score = 0;
        let lives = 3;
        let fallingSpeed = 5; 
        let combo = 0;

        const names = [
            "Steve", "NGLin", "BSK", "Hibernation NHLin", "Jeff", "Jeffrey Bezos",
            "Vivien", "Jorgina", "Ethan", "Ethanol", "Administrator Ethan",
            "Jeff StoneHenge", "Juntheng", "FurryKJT", "Noah", "Albert Pung",
            "Albert Chin", "Albert Kong", "Noah Chin", "Nevin", "Frustrated CHZ",
            "CHZ", "CHZ'S mom", "Jeff Lai", "Fredrick", "Eddy", "Asian Diddy"
        ];

        let basketPosition = gameContainer.offsetWidth / 2 - basket.offsetWidth / 2;
        const basketSpeed = 20;

        document.addEventListener("keydown", (event) => {
            if (event.key === "ArrowLeft") {
                basketPosition = Math.max(0, basketPosition - basketSpeed);
            } else if (event.key === "ArrowRight") {
                basketPosition = Math.min(gameContainer.offsetWidth - basket.offsetWidth, basketPosition + basketSpeed);
            }
            basket.style.left = `${basketPosition}px`;
        });

        function createFallingObject() {
            const object = document.createElement("div");
            object.classList.add("fallingObject");

            const randomName = names[Math.floor(Math.random() * names.length)];
            const textElement = document.createElement("span");
            textElement.textContent = randomName;
            textElement.style.color = "white";
            textElement.style.fontSize = "12px";

            object.appendChild(textElement);
            object.style.left = `${Math.random() * (gameContainer.offsetWidth - 50)}px`;
            object.style.top = "0px";
            gameContainer.appendChild(object);

            // Make the object clickable
            object.addEventListener("click", () => {
                score++;
                combo++;
                scoreDisplay.textContent = `Score: ${score} (Combo: x${combo})`;
                updateBackground();
                checkAchievements();
                object.remove();
            });

            let fallingInterval = setInterval(() => {
                const objectTop = parseInt(object.style.top);
                object.style.top = `${objectTop + fallingSpeed}px`;

                const objectRect = object.getBoundingClientRect();
                const basketRect = basket.getBoundingClientRect();

                if (
                    objectRect.bottom >= basketRect.top &&
                    objectRect.left < basketRect.right &&
                    objectRect.right > basketRect.left
                ) {
                    score++;
                    combo++;
                    scoreDisplay.textContent = `Score: ${score} (Combo: x${combo})`;
                    updateBackground();
                    checkAchievements();
                    object.remove();
                    clearInterval(fallingInterval);
                }

                if (objectTop > gameContainer.offsetHeight) {
                    combo = 0;
                    lives--;
                    livesDisplay.textContent = `Lives: ${lives}`;
                    object.remove();
                    clearInterval(fallingInterval);

                    if (lives <= 0) {
                        endGame();
                    }
                }
            }, 30);
        }

        function updateBackground() {
            if (score >= 20) gameContainer.style.backgroundColor = "#add8e6";
            if (score >= 50) gameContainer.style.backgroundColor = "#87ceeb";
            if (score >= 100) gameContainer.style.backgroundColor = "#4682b4";
        }

        function checkAchievements() {
            if (score === 50) alert("Achievement Unlocked: Scored 50 Points!");
            if (combo === 10) alert("Achievement Unlocked: 10x Combo!");
        }

        function endGame() {
            clearInterval(objectSpawner);
            finalScore.textContent = `Your Final Score: ${score}`;
            gameOverUI.style.display = "block";
        }

        playAgainButton.addEventListener("click", () => {
            score = 0;
            lives = 3;
            combo = 0;
            scoreDisplay.textContent = `Score: ${score}`;
            livesDisplay.textContent = `Lives: ${lives}`;
            gameOverUI.style.display = "none";
            objectSpawner = setInterval(createFallingObject, 1000);
        });

        leaderboardButton.addEventListener("click", () => {
            window.location.href = "https://sites.google.com/view/who-is-lick-ball-master/leaderboard";
        });

        let objectSpawner = setInterval(createFallingObject, 1000);

        let timeLeft = 60; 
        const timerDisplay = document.createElement("div");
        timerDisplay.style.position = "absolute";
        timerDisplay.style.top = "10px";
        timerDisplay.style.right = "10px";
        timerDisplay.style.fontSize = "20px";
        timerDisplay.style.color = "#333";
        timerDisplay.textContent = `Time Left: ${timeLeft}s`;
        gameContainer.appendChild(timerDisplay);

        function startTimer() {
            const timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = `Time Left: ${timeLeft}s`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endGame();
                }
            }, 1000);
        }

        startTimer();
    </script>
</body>
</html>